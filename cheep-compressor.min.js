// cheep-compressor
// Copyright (c) 2021 utubo under the [MIT](https://opensource.org/licenses/mit-license.php)
{let e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t=(e,t)=>{if(t<e.length)throw"too long"};var CCCompress=(s,r=500)=>{t(s,r);let l="",f="",n=e.length-1,i=s.length,b=0;for(;b<i;){let t,r,u=s.slice(0,b),o=b-n;for(let e=3;e<=i-b;e++){let l=u.indexOf(s.substr(b,e),o);if(-1===l)break;t=u.length-l,r=e}if(r)f+=e[t]+e[r];else{let t=s[b];for(l+=t,r=1;t===s[b+r]&&r<n;)r++;if(2<r)f+=e[1]+e[r];else{r=1;let t=e.indexOf(f.substr(-1,1));f.substr(-2,1)===e[0]&&t<n?f=f.slice(0,-1)+e[t+1]:f+=e[0]+"1"}}b+=r}for(;f.substr(-2,1)===e[0];)f=f.slice(0,-2);return f+"_"+l},CCDecompress=(s,r=500)=>{t(s,r);let l="",f=s.indexOf("_"),n=s.substr(0,f),i=s.substr(f+1);f=0;for(let s=0;s<n.length;s+=2){t(l,r);let b=e.indexOf(n[s]),u=e.indexOf(n[s+1]);switch(b){case 0:l+=i.substr(f,u),f+=u;break;case 1:l+=i[f].repeat(u),f++;break;default:l+=l.substr(l.length-b,u)}}return l+=i.substr(f)}}
