// cheep-compressor
// Copyright (c) 2021 utubo under the [MIT](https://opensource.org/licenses/mit-license.php)
{let e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t=(e,t)=>{if(t<e)throw"too long"};var CCCompress=(s,l=500)=>{t(s.length,l);let r="",n="",f=e.length-1,i=s.length,b=0;for(;b<i;){let t,l,o=s.slice(0,b),u=b-f;for(let e=3;e<=i-b;e++){let r=o.indexOf(s.substr(b,e),u);if(-1===r)break;t=o.length-r,l=e}if(l)n+=e[t]+e[l];else{let t=s[b];for(r+=t,l=1;t===s[b+l]&&l<f;)l++;if(2<l)n+=e[1]+e[l];else{let t=e.indexOf(n.substr(-1,1));n.substr(-2,1)===e[0]&&t<f?(n=n.slice(0,-1)+e[t+1],l=1):(n+=e[0]+"1",l=1)}}b+=l}return n+"_"+r},CCDecompress=(s,l=500)=>{t(s.length,l);let r="",n=s.indexOf("_"),f=s.substr(0,n),i=s.substr(n+1);n=0;for(let b=0;b<f.length;b+=2){t(s,l);let o=e.indexOf(f[b]),u=e.indexOf(f[b+1]);switch(t(u,l),o){case 0:r+=i.substr(n,u),n+=u;break;case 1:r+=i[n].repeat(u),n++;break;default:r+=r.substr(r.length-o,u)}}return r}}
